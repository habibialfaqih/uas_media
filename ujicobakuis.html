<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Python Mudah</title>
        <link rel="icon" href="#" type="image/icon type">
        <link rel="stylesheet" href="styling.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    </head>
    <body style="background-color: #ced4da">
        <nav class="nav nav-pills flex-column flex-sm-row bg1">
            <!-- tombol sidebar-->
            <div class="align-content-between ml-4 text-light ml">
                <button class="btn btn-link" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling">
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-list text-light" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                      </svg>
                </button>
            </div>
            <a class="flex-sm-fill text-sm-center nav-link text-light " aria-current="page" href="#">Media Pembelajaran Interaktif</a>
            <a class="flex-sm-fill text-sm-center nav-link text-light" href="landingMateri.html">Home</a>
            <a class="flex-sm-fill text-sm-center nav-link text-light" href="landingEvaluasi.html"></a>
            <a id="userlink" style="margin-right: 15px; " class="flex-sm-fill text-sm-center nav-link text-light" href="#"></a>
        </nav>
        <!-- side bar -->
        <div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
          <!-- header sidebar -->
          <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasScrollingLabel">Pilihan Materi</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <!-- body sidebar -->
          <div class="offcanvas-body">
              <div class="accordion accordion-flush" id="accordionFlushExample">
                  <!-- Materi 1 -->
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                        Pendahuluan
                      </button>
                    </h2>
                    <div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                      <table class="table table-striped">
                          <tbody><tr>
                                <td>
                                    <a href="sejarah.html" id="link"> <!-- sub materi 1 -->
                                        &ensp;&ensp;Kedatangan Islam ke Nusantara
                                    </a>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                    <a href="pengenalanSyntax.html" id="link"> <!-- sub materi 1 -->
                                        &ensp;&ensp;Peta Konsep
                                    </a>
                                  </td>
                              </tr>
                          </tbody></table>
                    </div>
                  </div>
                  <!-- Materi 2 -->
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                        Kedatangan Islam ke Nusantara
                      </button>
                    </h2>
                    <div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                      <table class="table table-striped">
                          <tbody><tr>
                                <td>
                                    <a href="pengertianPercabangan.html" id="link"> <!-- sub materi 2 -->
                                        &ensp;&ensp;Materi
                                    </a>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                    <a href="jenisPercabangan.html" id="link"> <!-- sub materi 2 -->
                                        &ensp;&ensp;Rangkuman
                                    </a>
                                  </td>
                              </tr>
                          </tbody></table>
                    </div>
                  </div>
                  <!-- Materi 3 -->
                  <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
                          Islam dan Jaringan Perdagangan Antarpulau
                        </button>
                      </h2>
                      <div id="flush-collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                          <table class="table table-striped">
                              <tbody><tr>
                                    <td>
                                        <a href="pengertianPerulangan.html" id="link"> <!-- sub materi 3 -->
                                            &ensp;&ensp;Mengamati Lingkungan
                                        </a>
                                    </td>
                                  </tr>
                              </tbody></table>
                      </div>
                    </div>
                    <!-- Materi 4 -->
                    <div class="accordion-item">
                      <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseFour" aria-expanded="false" aria-controls="flush-collapseFour">
                          Menu
                        </button>
                      </h2>
                      <div id="flush-collapseFour" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample">
                          <table class="table table-striped">
                              <tbody><tr>
                                    <td>
                                        <a href="landingMateri.html" id="link"> <!-- sub materi 4 -->
                                            &ensp;&ensp;Home
                                        </a>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                        <a href="landingLatihan.html" id="link"> <!-- sub materi 4 -->
                                            &ensp;&ensp;Evaluasi
                                        </a>
                                      </td>
                                  </tr>
                              </tbody></table>
                      </div>
                  </div>
              </div>
          </div> <!-- Tag tutup off canvas body accordion -->
        </div><!-- Tag tutup off canvas accordion -->        
        <div class="container">
            <!-- Stack the columns on mobile by making one full-width and the other half-width -->
            <div class="row">
              <div class="col-lg-12">
                <!-- Soal 1 -->
                <div class="card text-bg-light mt-5">
                    <h5 class="card-header">No 1</h5>
                    <div class="card-body">
                        <p>1. Apa yang dimaksud dengan Islamisasi pada bab pendahuluan...</p>
                        <input type="radio" name="pilih1" id="jawabanBetul1"> A. Proses sejarah panjang yang masih berlanjut hingga kini.<br>
                        <input type="radio" name="pilih1"> B. Proses pengenalan budaya Islam ke seluruh dunia.<br>
                        <input type="radio" name="pilih1"> C. Proses kolonialisasi oleh bangsa Arab.<br>
                        <input type="radio" name="pilih1"> D. Proses perdagangan antar negara Islam.<br>
                    </div>
                  </div>
                <!-- Soal 2 -->
                <div class="card mt-5 text-bg-light">
                    <h5 class="card-header">No 2</h5>
                    <div class="card-body">
                        <p>2. Bagaimana ajaran Islam pertama kali masuk ke lingkungan istana di Nusantara...</p>
                        <input type="radio" name="pilih2"> A. Lewat kolonialisasi oleh bangsa Arab.<br>
                        <input type="radio" name="pilih2"> B. Dengan cara peperangan.<br>
                        <input type="radio" name="pilih2" id="jawabanBetul2"> C. Melalui jalur perdagangan.<br>
                        <input type="radio" name="pilih2"> D. Melalui pengaruh Eropa.<br>
                    </div>
                  </div>
                <!-- Soal 3 -->
                <div class="card mt-5 text-bg-light">
                    <h5 class="card-header">No 3</h5>
                    <div class="card-body">
                        <p>3. Kapan kegiatan perdagangan di Kepulauan Indonesia mulai berlangsung menurut data arkeologis dan historis....</p>
                        <input type="radio" name="pilih3">A. Sejak abad ke-7 Masehi.<br>
                        <input type="radio" name="pilih3">B. Sejak abad ke-13 Masehi.<br>
                        <input type="radio" name="pilih3">C. Sejak abad ke-18 Masehi.<br>
                        <input type="radio" name="pilih3" id="jawabanBetul3">D. Sejak abad ke-1 Masehi.<br>
                    </div>
                  </div>
                <!-- Soal 4 -->
                <div class="card mt-5 text-bg-light">
                    <h5 class="card-header">No 4</h5>
                    <div class="card-body">
                        <p>4. Penelitian oleh siapa yang mengkaji jalur pelayaran dan jaringan perdagangan Kerajaan Sriwijaya dengan negeri-negeri di Asia Tenggara, India, dan Cina...</p>
                        <input type="radio" name="pilih4" id="jawabanBetul4">A. W. Wolters.<br>
                        <input type="radio" name="pilih4">B. Taufik Abdullah.<br>
                        <input type="radio" name="pilih4">C. W.P. Groeneveldt.<br>
                        <input type="radio" name="pilih4">D. Tome Pires.<br>
                    </div>
                  </div>
                <!-- Soal 5 -->
                <div class="card mt-5 text-bg-light">
                    <h5 class="card-header">No 5</h5>
                    <div class="card-body">
                        <p>5. Mengapa Pulau Sumatra dianggap sebagai daerah pertama dan terpenting dalam pengembangan agama Islam di Indonesia...</p>
                        <input type="radio" name="pilih5">A. Karena letaknya di tengah Indonesia.<br>
                        <input type="radio" name="pilih5" id="jawabanBetul5">B. Karena letaknya yang strategis dan berhadapan langsung dengan jalur perdagangan dunia, yakni Selat Malaka.<br>
                        <input type="radio" name="pilih5">C. Karena memiliki banyak kerajaan Hindu.<br>
                        <input type="radio" name="pilih5">D. Karena memiliki kekayaan alam yang melimpah.<br>
                    </div>
                  </div>
              </div>
            </div>
        </div>
        <div class="container">
            <!-- Stack the columns on mobile by making one full-width and the other half-width -->
            <div class="row">
              <div class="col-lg-12">
                <div class="btn-group text-center mt-5 d-block" role="group" aria-label="Basic outlined example">
                    <button type="button" class="btn btn-primary" onclick="kirimJawaban()" >Kirim</button>
                    <button type="button" class="btn btn-primary" onclick="ulang()">Ulang</button>
                    <button type="button" class="btn btn-primary" id="sub-btn">Selesai</button>
                </div>        
                   <!-- tampilan Nilai  -->
                   <div class="card text-center text-bg-success mt-3" id="nilaiLat" style="display: none;">
                    <div class="card-header">
                      Nilai
                    </div>
                    <div class="card-body">
                      <h5 class="card-title" id="kalimat"></h5>
                      <p class="card-text" id="feedBack"></p>
                    </div>
                  </div>
              </div>
            </div>
        </div>
    <script>
    //menampilkan nama pengguna dari firebase
    var pengguna = sessionStorage.getItem("fullname");
    var namaPengguna = document.getElementById("userlink");
    namaPengguna.innerText = pengguna;
    //kirim
     function kirimJawaban(){   
        const jawaban1 = document.querySelector("#jawabanBetul1");
        const jawaban2 = document.querySelector("#jawabanBetul2");
        const jawaban3 = document.querySelector("#jawabanBetul3");
        const jawaban4 = document.querySelector("#jawabanBetul4");
        const jawaban5 = document.querySelector("#jawabanBetul5");
        const kunciJawaban = [
        jawaban1.checked,jawaban2.checked,jawaban3.checked,jawaban4.checked,jawaban5.checked
        ]
        let skor = 0
        for(let i = 0; i < kunciJawaban.length; i++){
            if (kunciJawaban[i] == true){
                skor += 20
                sessionStorage.setItem('latihan', skor)
            }
        }
        if (skor >= 80){
            document.querySelector("#nilaiLat").style.display ="block"
            let kataNilai = document.getElementById('kalimat');
            kataNilai.innerText = `Selamat, Nilai anda ${skor}`;
        }
        else{
            document.querySelector("#nilaiLat").style.display ="block"
            // Mengambil elemen yang ingin diubah kelasnya
            let elemen = document.getElementById("nilaiLat");

            // Menghapus kelas yang ada (jika ada)
            elemen.classList.remove("text-bg-success");

            // Menambahkan kelas baru
            elemen.classList.add("text-bg-danger");
            let kataNilai = document.getElementById('kalimat');
            kataNilai.innerText = `Tolong diulang, nilai anda ${skor}`;
        }
        }
        function ulang(){
            document.querySelector("#nilaiLat").style.display ="none"
            var radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(function(radioButton) {
              radioButton.checked = false;
            });
            let skor = 0
            let kataNilai = document.getElementById('kalimat');
            kataNilai.innerText = "" 
        }
        function Signout(){
          sessionStorage.removeItem('username');
          sessionStorage.removeItem('fullname');
          sessionStorage.removeItem('password');
          sessionStorage.removeItem('class');
          sessionStorage.removeItem('nim');
          sessionStorage.removeItem('evaluasi');
          sessionStorage.removeItem('latihan');
          window.location="halamanLogin.html"
        }
    </script>
    <script type="module" >
      
// --------------------References---------------------------
    const submit = document.getElementById('sub-btn');
    var currentUser = null;
    var currentFullName = null;
    var currentNim = null;
    var currentClass = null;
    var currentLatihan = null;



 //------------------FIREBASE CONFIG------------------------
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
   // TODO: Add SDKs for Firebase products that you want to use
    import { getDatabase, ref, set, push, get, child, onValue, update, remove } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

  
    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDCC8qgldlOSiMUZNlocgTbsketEd5kM0I",
      authDomain: "tugasakhirweb1.firebaseapp.com",
      projectId: "tugasakhirweb1",
      storageBucket: "tugasakhirweb1.appspot.com",
      messagingSenderId: "729508669892",
      appId: "1:729508669892:web:6ed7c489cef898ec68dc91"
    };

    // Initialize Firebase 
    const app = initializeApp(firebaseConfig);

    const db = getDatabase();


// ----------------------Function-----------------

    function getUsername(){
        currentUser = sessionStorage.getItem('username');
        currentFullName = sessionStorage.getItem('fullname');
        currentNim = sessionStorage.getItem('nim');
        currentClass = sessionStorage.getItem('class');
        currentLatihan= sessionStorage.getItem('latihan');
	}


	//-------------- update progres function in database---------------
	  function UpdateData() {
	  	getUsername();
          if(currentLatihan > 0){
            update(ref(db, "UserList/"+ currentUser),{
            latihan : currentLatihan
          })
          .then(()=>{
            swal({
                    title: "Perhatian!",
                    text: "Nilai Latihan sudah di update.",
                    icon: "success",
                    button: "Lanjutkan",
                  });

          })
          .catch((error)=>{
            swal({
                    title: "Maaf!",
                    text: "unsucsessful, error"+error,
                    icon: "error",
                    button: "Lanjutkan",
                  });
          });
        }
        else{
            update(ref(db, "UserList/"+ currentUser),{
                latihan : currentLatihan
              })
              .then(()=>{
                swal({
                    title: "Silahkan!",
                    text: "Kerjakan Latihannya ya!",
                    icon: "warning",
                    button: "Lanjutkan",
                      });
              })
              .catch((error)=>{
                swal({
                        title: "Maaf!",
                        text: "unsucsessful, error"+error,
                        icon: "error",
                        button: "Lanjutkan",
                      });
              });	    
          }
        }
	  
// --------------------ASSIGN THE EVENTS---------------------

    submit.addEventListener('click', UpdateData);

	
    </script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    </body>
</html>